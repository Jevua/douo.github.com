---
title: Shanbay
date: '2017-10-30'
description:
type: draft ## 移除这个字段，笔记才会公开发布
---


扇贝网的工作是以兼职外包的形式进行的，因为开发了[扇贝查词 Chrome 扩展][]，认识了扇贝的联合创始人，当时他们网站正准备开发移动客户端，交流之后，我建立了一个两人的小团队，负责扇贝网移动端的开发工作。期间，我个人负责了[扇贝单词][]、[扇贝阅读][]、[扇贝新闻][]、[扇贝炼句][]的 Android 端开发及 iOS 端 [扇贝新闻][] 的开发。

期间用 Ruby 实现了一个 json 转 pojo 的小工具，使用 mustache 进行模板填充，还附带 fromJson、toJson 方法，
其中一个印象比较深刻的难点是，Android 端的扇贝阅读器的实现，Android 的 TextView 不像 iOS 的 UITextView 对富文本的支持那么好。涉及的需求有改变个别单词的颜色，加下划线，改变下划线样式，文本的对齐，及文本中图片的对齐，每个单词，或者短语要响应独立的事件。每个基本元素都用 View 的话，对性能影响非常大。只能考虑用 Spannable，经过阅读 Android Spannable 模块的代码后发现，Spannable 不能实现所有功能，Spannable 的扩展性也较差。最后决定参考 Spannable 自己实现一个文本布局模块，最终实现后性能符合要求，对大量文本进行渲染对性能的影响也较小。
