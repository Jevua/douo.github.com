---
title: 2020年04月16日杂记
date: '2020-04-16'
description:
---

# 全局电竞切换

- 比分页
- 推荐页
- 即时指数
- 资料库
- 资讯列表
- 不中退钻列表


# 筛选弹出菜单

- 筛选联赛显示当前选择联赛数量及全部联赛数量
- 筛选游戏默认全选是否需要保存本地，是否影响其他比赛列表 TODO
- 比赛排序，可选时间及联赛。默认时间，需存本地，不影响其他列表、其他球种
- 任意选项变更时，关闭弹出菜单，同时刷新列表 TODO
- 游戏筛选是否影响联赛筛选 TODO

# 电竞-即时比分

## 头部栏

- 不显示即时指数入口
- 不显示比赛动态按钮
- 显示筛选按钮
- 切换球种回到标签栏回到即时比分列表

## 标签栏

- 高亮**即时**标签
- 点击即时Tab，弹出比赛状态筛选菜单，选项包括：即时（所有状态）、进行中（1）、未开始（0）。默认选中**即时**，选项需存本地
- 比赛状态：0=未开始 1=进行中 2=完场 3/4=已取消 5=待定


## 比赛列表

- 显示满足赛事筛选和筛选栏条件的所有即时比赛
- 即时比赛：UTC+8 时间昨日未结束的比赛以及今日所有比赛
- 隔日第一场比赛需显示日期标示
- 列表支持下拉刷新
- 无数据时显示无数据 UI
- 报错时显示无数据 UI

### 排序

- 按时间排序，先按比赛状态分为 进行中/未开始/其他。同为进行中：按比赛时间升序，同时间的按比赛ID升序。同为未开始：按比赛时间升序，同时间的按比赛ID升序。其他：按比赛时间降序，同时间的按比赛ID升序。
- 按联赛排序，按先联赛默认顺序排序，后续排序规则与时间排序相同

## 比赛项

- 顶部显示：联赛简称、比赛状态、开赛时间、总局数（BO）
- 中间显示：游戏类型、A 队伍标示、比赛状态特殊标示、B 队伍标示、关注状态按钮
- 下方显示：当前局标示、直播标示、推荐标示
- 点击跳转比赛内页

### 未开始

- 比赛状态特殊标示显示 VS
- 隐藏当前局标示

### 进行中

#### MOBA

- 比赛状态，显示全场胜负
- 比赛状态特殊标示显示当前局人头数
- 经济优势队伍标示，显示经济优势，差量还是总值 TODO
- 当前局标示，显示当前局势及进行时间

#### CSGO

- 比赛状态，显示全场胜负
- 比赛状态特殊标示显示当前局胜利回合数
- 当前局标示，显示当前局势及地图标示

### 完赛

- 比赛状态特殊标示显示全场胜负
- 隐藏当前局标示


# 电竞-赛程/完场

## 头部栏

- 不显示即时指数入口
- 不显示比赛动态按钮
- 显示筛选按钮
- 显示日期筛选按钮

## 赛程/完场-联赛筛选

- 当前比分列表所有比赛的赛事集
- 缺省筛选为全部赛事
- 筛选选择**无需**保存


## 比赛列表

- 当前选择日期的所有比赛，是否为UTC+8时间，所选日期 0 时至第二天 12 时的所有比赛 TODO
- 排序规则为日期时，当日第一场比赛需显示日期标示，按联赛排序则不显示
- 显示满足赛事筛选和筛选栏条件的所有比赛
- 列表支持下拉刷新
- 无数据时显示无数据 UI
- 报错时显示无数据 UI


### 排序

- 按时间排序，先开赛时间升序显示
- 按联赛排序，按先联赛默认顺序排序，后续排序规则与时间排序相同

## 日期筛选

### 赛程

- 日历选择控件的可选日期范围：未来7天。（本地时区？） TODO
- 默认选择本地时区的明天

### 完场

- 日历选择控件的可选日期范围：2015年1月1日-昨天（本地时区？）TODO
- 默认选择本地时区的昨天



# 赛事筛选

## 标签栏

- 分为全部和推荐
- 默认选择 tab 由外部传入
- 全部，外部传入的所有赛事列表
- 推荐，筛选赛事赛事列表包含有顶级、一级和二级的赛事，如结果集为空则显示全部赛事
- 每个标签页的选择状态都是独立的
- 切换标签页时重置当前标签页的选择状态到默认状态
- 默认状态指，当前标签页属于外部传入的标签页码，则为已选择赛事集，不是则默认全选
- 赛事按游戏类型分组显示

## 排序

- 按游戏分组排序、再赛事 id 排序 TODO
- 游戏顺序为 DOTA2 LOL CSGO KPL（与筛选弹出菜单一致）


## 即时比分-联赛筛选

- 全部联赛当前即时比分列表所有比赛的赛事集
- 缺省筛选为推荐赛事
- 筛选选择需保存到本地

当前即时比分列表的赛事集，与已保存的赛事集不一致时：

- 取两个集合的交集，并更新本地保存结果
- 若交集为空，则重置为缺省？ TODO

## 赛程/完场-联赛筛选

- 全部联赛为当前比分列表所有比赛的赛事集
- 缺省筛选为全部赛事
- 筛选选择**无需**保存


## 与游戏筛选关联 TODO

若当前已选择赛事包含游戏 A、B、C 的联赛

- 取消选择游戏 A、已选择赛事变为 B、C。
- 再选择回 A，已选择赛事是否仍为 A（全选、或恢复前一个选择状态）、B、C。

## 底部栏

- 底部固定显示
- 返回当前标签页码与已选择赛事集
- 无选择任何赛事时，不可按
- 全选，选择当前标签页所有赛事
- 反选，选择当前选择的补集

# 电竞-关注

## 头部栏

- 仅显示历史关注按钮

## 关注

- 本地维护关注比赛 Id 列表
- 切换关注操作，先更改本地再同步服务器
- 请求关注列表同时将后台关注数据同步到本地
- 历史关注列表不影响本地关注列表，但取消关注操作需同时尝试移除本地关注id


## 关注列表

- UTC+8 昨日以及今日关注的所有比赛
- 即时数据需要同步更新到关注的比赛

### 排序

- 按比赛时间降序，同时间的按比赛ID升序

## 历史关注列表

- 关注的所有比赛

### 排序

- 按比赛时间降序，同时间的按比赛ID升序


# 比赛内页

- 进入内页需向服务器请求当前比赛数据流
- 比赛状态变化需实时同步到 UI
- 返回上一页需通知服务器停止推送当前比赛详情

## 头部

- 直播、分享、关注复用其他球种功能
- 其他元素不可点

## 标签页

- 默认显示赛况、推荐
- 推荐隐藏共用其他球种开关 TODO
- 默认选择页码，可外部控制
- 由推介页跳转进来默认选择推介
- 其他位置跳转，默认选择赛况页

## 赛况

- 顶部显示对局Tab，列出该场比赛进行中&已结束的对局
- 正文 UI 由前端实现，数据及数据更新由原生实现并提供给前端展示


## 推介列表

- 显示当前比赛的所有推介
- 有发布电竞推介权限的专家显示发布推介按钮
