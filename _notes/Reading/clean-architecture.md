---
title: Clean Architecture
date: '2018-04-24'
description:

---

这本书整体江什么，作者的介绍

前半部分是前置知识，粗略过了一遍

1. 架构是什么，如何衡量架构的好坏
2. 编程范式的发展，各自解决什么问题？
3. SOLID 原则
4. 组件

## 关于架构

- 什么是设计
- 什么是架构

一开始可以认为，先认为**设计既架构**

架构高层次的结构，以房子为例，架构既是一个房子的结构，立面，房间，等等。  
设计则是低层细节，设计师交付的装修图，比如软装，布线，等等

高层结构和底层细节在一起能决定整个房子的设计，决定房子最后的施工（最终的产品）。

这个比喻不太对，一个架构只能出一套房子。我所理解的架构更像是设计的指导思想，设计了成千上百个房子后所提炼出来的东西。

软件架构的目标就是**最小化构建和维护一个系统的所需的人力资源。**架构可以当成两个量的累加，降低构建系统的资源是重要的，当也可以适当增加构建的资源，以降低以后维护的资源，作者强调了制造混乱（making messes）最终总比保持清洁（staying clean）慢，也就是欲速则不达同意适用于软件开发。但是软件开发的复杂性在于，系统有用了才能体现出价值，把握系统发布的时间窗口也很重要，做软件的困难也在于如何平衡时间与设计。

另外一个量就是维护的成本，衡量一个架构的好坏，由系统变动所需要的代价来决定。


- Behavior，满足需求的代码
- Structure，

在下文中的 Function 和 Architecture 应该也是对于 Behavior 和  Structure。

The difficulty in making such a change should be proportional only to the scope of the change, and not to the shape of the change.

怎么理解改变的范围(scope of the change) 和改变的形状（shape of the change）

对于利益相关者来说（stakeholder），他们认为提供的需求都是在一定范围内的变化。而对于开发者，新的需求总意味着系统形状的变化。因为原来的系统架构不适用于新的需求。

功能还是架构重要？功能衡量系统能不能满足需求？架构意味着系统是否易于变化。作者举了两个极端的例子

1. 一个系统能完全的满足需求但是不可变，
2. 一个系统完全不可用，但是易于改变。

哪个系统更没用？第一个系统虽然能用，但是一旦需求变化了变不能用了，因为他不可更改。第二个系统虽然不能用，但是它可以持续改善最终变得有用。

- 软件的第一价值，行为或功能，往往是紧急但并不总是特别重要
- 软件的第二价值，架构，很重要但不会特别紧急

1. 紧急重要
2. 重要非紧急
3. 紧急非重要
4. 非紧急非重要

BM 与开发者往往把紧急但不重要的系统特性从第三位放到第一位。因为他们没有区分区分重要紧急与紧急非重要。最终往往忽略了对于系统来说重要的架构开发，而偏向于实现不重要的功能

BM 没有能力评估架构的重要性。对于开发团队必须要责任去强调架构的重要性。

## 编程范式的发展

### 结构化编程

> 结构化编程（英语：Structured programming），一种编程典范。它采用子程序、代码区块、for循环以及while循环等结构，来取代传统的 goto。希望借此来改善计算机程序的明晰性、品质以及开发时间，并且避免写出面条式代码。

结构化编程的发展，了解了一下 Dijkstra 的 《Go To Statement Considered Harmful》，代码文本应该贴近代码运行时状态。当程序停止在某一行，如果是顺序执行的代码，我们很容易看出程序运作到哪了，如果是使用了 `goto`，我们将很难知道这行代码是通过哪个 `goto` 跳转过来的，`goto` 破坏程序的结构和可读性。Dijkstra 在意的是程序的结构和思路的清晰，而不是极限的优化。

- 在代码中到达特定“位置”的方法越多，对于系统的状态在该点处的信心越不可信

